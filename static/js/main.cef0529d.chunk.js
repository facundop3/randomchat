(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{108:function(e,n,t){e.exports=t(236)},113:function(e,n,t){},136:function(e,n){},236:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),o=t(14),i=t.n(o),s=(t(113),t(59)),c=t(44),u=t(13),l=t(5),d=t(6),m=t(91),f=t.n(m)()("http://randombla.herokuapp.com/");var h={suscribeToMessages:function(e){f.on("new-message",function(n){return e(n)})},sendMessage:function(e){f.emit("new-message",e)},registerUser:function(e){f.emit("new-username",e)},suscribeToUsers:function(e){f.on("all-users",function(n){e(n),console.log(n)})},sendPrivateMessage:function(e){f.emit("new-private-message",e)},suscribeToPrivateMessages:function(e){f.on("new-private-message",function(n){return e(n)})}},v=function(e){var n=e.placeholder,t=void 0===n?"":n,o=e.handleSubmit,i=e.cleanAfter,s=e.hotAction,c=e.handleChange,l=e.hotValue,d=e.labelText,m=Object(a.useState)(""),f=Object(u.a)(m,2),h=f[0],v=f[1],b=function(e){return e.target.focus()};return r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),o&&o(h),v(i?"":h)},style:{position:"relative"},className:"col-12"},r.a.createElement("div",{class:"input-group"},s?r.a.createElement("input",{type:"text",onChange:c,value:l,placeholder:t,onClick:b,class:"form-control","aria-label":d}):r.a.createElement("input",{Type:"text",onChange:function(e){var n=e.target.value;v(n)},value:h,placeholder:t,onClick:b,class:"form-control","aria-label":d})))},b=function(e){var n=e.sendMessage;return r.a.createElement(v,{handleSubmit:n,cleanAfter:!0,placeholder:"Input your message"})};function p(){var e=Object(l.a)(["\n  text-decoration: none;\n  color: #fff;\n"]);return p=function(){return e},e}function g(){var e=Object(l.a)(["\n  overflow: scroll;\n"]);return g=function(){return e},e}var E=d.a.div(g()),y=d.a.a(p()),O=function(e){var n=e.messagesList;return r.a.createElement(E,{className:"col-8"},n.map(function(e,n){var t=e.message,a=e.username;return r.a.createElement("h1",{key:Date.now()+n},r.a.createElement(y,null,a,": "),t)}))};function j(){var e=Object(l.a)(["\n  width: 100vw;\n  height: calc(100vh - 64px);\n  position: absolute;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background: rgba(0, 0, 0, 0.3);\n  z-index: 1;\n"]);return j=function(){return e},e}function w(){var e=Object(l.a)(["\n  text-align: center;\n"]);return w=function(){return e},e}function M(){var e=Object(l.a)(["\n  background-color: #fff;\n  border-radius: 5px;\n  padding: 1em;\n  position: absolute;\n  box-shadow: 4px 3px 4px rgba(0, 0, 0, 0.4);\n"]);return M=function(){return e},e}var x=d.a.div(M()),k=d.a.h1(w()),S=d.a.div(j()),T=function(e){return r.a.createElement(S,null,r.a.createElement(x,null,r.a.createElement(k,null,"Chat as a guest"),r.a.createElement(v,{labelText:"Chat as a guest",placeholder:"your username",handleSubmit:function(n){n&&/\S/.test(n)&&(h.registerUser(n),e.setHideLogin(!0))},faIcon:"user-astronaut",iconColor:"#95ca3e"})))},C=t(58),L=t(94),D=t(95),I=t(106),N=t(96),U=t(15),X=t(107),Y=function(e){function n(e){var t;return Object(L.a)(this,n),(t=Object(I.a)(this,Object(N.a)(n).call(this,e))).state={relX:0,relY:0,x:e.x,y:e.y},t.gridX=e.gridX||1,t.gridY=e.gridY||1,t.onMouseDown=t.onMouseDown.bind(Object(U.a)(t)),t.onMouseMove=t.onMouseMove.bind(Object(U.a)(t)),t.onMouseUp=t.onMouseUp.bind(Object(U.a)(t)),t.onTouchStart=t.onTouchStart.bind(Object(U.a)(t)),t.onTouchMove=t.onTouchMove.bind(Object(U.a)(t)),t.onTouchEnd=t.onTouchEnd.bind(Object(U.a)(t)),t}return Object(X.a)(n,e),Object(D.a)(n,[{key:"onStart",value:function(e){var n=i.a.findDOMNode(this.handle),t=document.body,a=n.getBoundingClientRect();this.setState({relX:e.pageX-(a.left+t.scrollLeft-t.clientLeft),relY:e.pageY-(a.top+t.scrollTop-t.clientTop)})}},{key:"onMove",value:function(e){var n=Math.trunc((e.pageX-this.state.relX)/this.gridX)*this.gridX,t=Math.trunc((e.pageY-this.state.relY)/this.gridY)*this.gridY;n===this.state.x&&t===this.state.y||(this.setState({x:n,y:t}),this.props.onMove&&this.props.onMove(this.state.x,this.state.y))}},{key:"onMouseDown",value:function(e){0===e.button&&(this.onStart(e),document.addEventListener("mousemove",this.onMouseMove),document.addEventListener("mouseup",this.onMouseUp),e.preventDefault())}},{key:"onMouseUp",value:function(e){document.removeEventListener("mousemove",this.onMouseMove),document.removeEventListener("mouseup",this.onMouseUp),this.props.onStop&&this.props.onStop(this.state.x,this.state.y),e.preventDefault()}},{key:"onMouseMove",value:function(e){this.onMove(e),e.preventDefault()}},{key:"onTouchStart",value:function(e){this.onStart(e.touches[0]),document.addEventListener("touchmove",this.onTouchMove,{passive:!1}),document.addEventListener("touchend",this.onTouchEnd,{passive:!1}),e.preventDefault()}},{key:"onTouchMove",value:function(e){this.onMove(e.touches[0]),e.preventDefault()}},{key:"onTouchEnd",value:function(e){document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd),this.props.onStop&&this.props.onStop(this.state.x,this.state.y),e.preventDefault()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"col-12",onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,style:{position:"absolute",left:this.state.x,top:this.state.y,touchAction:"none"},ref:function(n){e.handle=n}},this.props.children)}}]),n}(r.a.Component);function z(){var e=Object(l.a)(["\n    margin: .25em;\n    padding:.5em;\n    border-radius: 20px;\n    display: inline-block;\n    ","\n"]);return z=function(){return e},e}function P(){var e=Object(l.a)(["\n    display: flex;\n  ","\n"]);return P=function(){return e},e}var A=d.a.div(P(),function(e){return e.isLeft?"justify-content: flex-start;":"justify-content: flex-end;"}),B=d.a.div(z(),function(e){return e.isLeft?"border-bottom-left-radius: 0;\n        background-color: #e6ecf0;\n        color:#14171a;\n            ".concat(e.isSecond&&"border-top-left-radius: 0;","\n        "):"border-bottom-right-radius: 0;\n        background-color: #1da1f2;\n        color: white;\n        ".concat(e.isSecond&&"border-top-right-radius: 0;","\n        ")}),V=function(e){var n=e.isLeft,t=e.message,a=e.isSecond;return r.a.createElement(A,{isLeft:n},r.a.createElement(B,{isLeft:n,isSecond:a},t))};function F(){var e=Object(l.a)(["\n  height: 91%;\n  background-color: white;\n"]);return F=function(){return e},e}function H(){var e=Object(l.a)(["\n  height: 83%;\n  width: 100%;\n  margin: 0%;\n  padding: 0.5em;\n  overflow: scroll;\n  box-sizing: border-box;\n"]);return H=function(){return e},e}function R(){var e=Object(l.a)(["\n  height: ",";\n  position: absolute;\n  display: block;\n  z-index: 1;\n  box-shadow: 0px 1px 1px 1px rgba(0, 0, 0, 0.15);\n"]);return R=function(){return e},e}function W(){var e=Object(l.a)(["\n  height: 2em;\n  width: 100%;\n  box-sizing: border-box;\n  background-image: linear-gradient(45deg, #662d8c, #ed1e79);\n  color: white;\n  font-weight: bold;\n  justify-content: space-between;\n  display: flex;\n  padding: 0.5em 1em;\n"]);return W=function(){return e},e}var G=d.a.div(W()),J=d.a.div(R(),function(e){return e.isMinimized?"0vh":"40vh"}),q=d.a.div(H()),$=d.a.div(F()),_=function(e){var n=e.id,t=e.username,o=e.handleClose,i=e.privateMessages,s=Object(a.useState)(!1),c=Object(u.a)(s,2),l=c[0],d=c[1];return r.a.createElement(Y,{x:100,y:100},r.a.createElement(J,{isMinimized:l},r.a.createElement(G,null,r.a.createElement("span",null,t),r.a.createElement("div",null,r.a.createElement(C.a,{icon:l?"square":"window-minimize",onClick:function(e){d(!l)},style:{marginRight:".5em"}}),r.a.createElement(C.a,{icon:"times",onClick:function(){o(n)}}))),!l&&r.a.createElement($,null,r.a.createElement(q,null,i&&i.map(function(e,n,t){var a=e.content,o=e.isOutbound;return r.a.createElement(V,{key:Date.now()+n,message:a,isSecond:n&&Boolean(o)===Boolean(t[n-1].isOutbound),isLeft:!o})})),r.a.createElement(b,{cleanAfter:!0,sendMessage:function(e){if(e&&/\S/.test(e)){var t={id:n,message:{content:e,isOutbound:!0}};h.sendPrivateMessage(t)}}}))))};function K(){var e=Object(l.a)(["\n  width: 100%;\n  padding: 1em;\n  box-sizing: border-box;\n"]);return K=function(){return e},e}var Q=d.a.div(K());var Z=function(e){var n=e.handleChange,t=e.inputValue,a=e.labelText;return r.a.createElement(Q,null,r.a.createElement("div",{class:"input-group mb-3"},r.a.createElement("input",{type:"text",class:"form-control",placeholder:"Search an user","aria-label":a,"aria-describedby":"basic-addon1",value:t,onChange:n,margin:"normal"})))},ee=t(41),ne=t(97),te=t.n(ne),ae=t(99),re=t.n(ae),oe=t(22),ie=t.n(oe);var se=Object(ee.withStyles)({root:{flexGrow:1},headerStyle:{backgroundImage:"linear-gradient(45deg, #662d8c, #ed1e79)"}})(function(e){var n=e.classes;return r.a.createElement("div",{className:n.root},r.a.createElement(te.a,{position:"static",className:n.headerStyle},r.a.createElement(re.a,null,r.a.createElement(ie.a,{variant:"h6"},r.a.createElement("span",{style:{color:"#fff"}}," # General ")))))}),ce=t(102),ue=t.n(ce),le=t(42),de=t.n(le),me=t(43),fe=t.n(me),he=t(100),ve=t.n(he),be=t(101),pe=t.n(be),ge=function(e){var n=e.id,t=e.username,a=e.avatarImage,o=e.handleUserClick,i=e.classes;return r.a.createElement(de.a,{alignItems:"flex-start",key:n,onClick:function(){console.log("Clicked"),console.log(n),o&&o(n)}},a&&r.a.createElement(ve.a,null,r.a.createElement(pe.a,{alt:"add image",src:"/static/images/avatar/1.jpg"})),r.a.createElement(fe.a,{primary:t,secondary:r.a.createElement(r.a.Fragment,null,r.a.createElement(ie.a,{component:"span",className:i.inline,color:"textPrimary"},"Here goes description")," \u2014 To do: Add description")}))};var Ee=Object(ee.withStyles)(function(e){return{root:{width:"100%",maxWidth:360,backgroundColor:e.palette.background.paper},inline:{display:"inline"}}})(function(e){var n=e.classes,t=e.users,a=e.handleUserClick,o=e.filter,i=t.filter(function(e){var n=e.username;return n&&n.toLowerCase().includes(o.toLowerCase())});return r.a.createElement(ue.a,{className:n.root},i.length?i.map(function(e){var t=e.username,o=e.id,i=e.avatarImage;return r.a.createElement(ge,{handleUserClick:a,avatarImage:i,username:t,classes:n,id:o})}):r.a.createElement(de.a,{alignItems:"flex-start"},r.a.createElement(fe.a,{primary:"No users online",secondary:r.a.createElement(r.a.Fragment,null,r.a.createElement("a",{href:"https://www.youtube.com/watch?v=MX6MvV8cbh8",target:"_blank",rel:"noopener noreferrer"},r.a.createElement(ie.a,{component:"span",className:n.inline,color:"textPrimary"},"So lonely, so lonely, so lonely ",r.a.createElement("span",{role:"img","aria-label":"Music"},"\ud83c\udfb6"))))})))}),ye=t(103),Oe=t.n(ye),je=t(104),we=t.n(je);var Me=function(e){return r.a.createElement(Oe.a,{style:{height:"100%",borderRadius:0}},r.a.createElement(we.a,null,e.children))};function xe(){var e=Object(l.a)(["\n  min-height: 85%;\n"]);return xe=function(){return e},e}function ke(){var e=Object(l.a)(["\n  height: 100vh;\n  background-image: linear-gradient(45deg, #2e3192, #1bffff);\n"]);return ke=function(){return e},e}var Se=d.a.div(ke()),Te=d.a.div(xe()),Ce=function(e){var n=Object(a.useState)([]),t=Object(u.a)(n,2),o=t[0],i=t[1],l=Object(a.useState)([]),d=Object(u.a)(l,2),m=d[0],f=d[1],v=Object(a.useState)({chatsIds:[]}),p=Object(u.a)(v,2),g=p[0],E=p[1],y=Object(a.useState)(""),j=Object(u.a)(y,2),w=j[0],M=j[1],x=Object(a.useState)(!1),k=Object(u.a)(x,2),S=k[0],C=k[1],L=function(e){var n=e.message,t=e.id;g.chatsIds.includes(t)?g.hasOwnProperty(t)?g[t].messages=[].concat(Object(c.a)(g[t].messages),[n]):(g[t]={},g[t].messages=[n]):(g.chatsIds=[].concat(Object(c.a)(g.chatsIds),[t]),g[t]={},g[t].messages=[n]),E(Object(s.a)({},g))},D=function(e){o.push(e),i(Object(c.a)(o))},I=function(e){f(e)};Object(a.useEffect)(function(){h.suscribeToMessages(D),h.suscribeToPrivateMessages(L)},[]),Object(a.useEffect)(function(){h.suscribeToUsers(I)},[m]),Object(a.useEffect)(function(){},[g]);var N=function(e){var n;f((n=e,m.map(function(e){return e.id===n?Object(s.a)({},e,{isOpen:!e.isOpen}):e})))};return r.a.createElement(Se,null,r.a.createElement(se,null),r.a.createElement(Te,{className:"row"},m.filter(function(e){return e.isOpen}).map(function(e){var n=e.id,t=e.username;return r.a.createElement(_,{id:n,username:t,handleClose:N,privateMessages:g[n]&&g[n].messages,key:n})}),!S&&r.a.createElement(T,{setHideLogin:C}),r.a.createElement(O,{messagesList:o}),r.a.createElement("div",{className:"col-4"},r.a.createElement(Me,null,r.a.createElement(Z,{handleChange:function(e){var n=e.target.value;M(n)},inputValue:w,labelText:"Filter a user"}),r.a.createElement(Ee,{users:m,filter:w,handleUserClick:N})))),r.a.createElement("div",{className:"row"},r.a.createElement(b,{sendMessage:function(e){e&&/\S/.test(e)&&h.sendMessage(e)}})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));t(235);var Le=t(30),De=t(16);Le.b.add(De.e,De.b,De.g,De.c,De.f,De.a,De.d),i.a.render(r.a.createElement(Ce,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[108,1,2]]]);
//# sourceMappingURL=main.cef0529d.chunk.js.map